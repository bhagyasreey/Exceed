<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Station Master Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        nav {
            background-color: #333;
            color: white;
        }

        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            display: flex;
        }

        nav ul li {
            position: relative;
        }

        nav ul li a {
            display: block;
            color: white;
            text-decoration: none;
            padding: 14px 20px;
        }

        nav ul li a:hover {
            background-color: #575757;
        }

        nav ul li ul {
            display: none;
            position: absolute;
            background-color: #333;
            padding: 0;
            margin: 0;
            list-style-type: none;
            z-index: 1000;
            min-width: 200px;
        }

        nav ul li:hover ul {
            display: block;
        }

        nav ul li ul li a {
            padding: 10px 20px;
        }

        nav ul li ul li a:hover {
            background-color: #575757;
        }

        main section {
            display: none;
            padding: 20px;
        }

        main section.active {
            display: block;
        }

        main {
            padding: 20px;
        }

        h2, h3 {
            color: #333;
        }

        .dashboard-tools {
            margin-top: 20px;
        }

        .dashboard-tools div {
            margin-bottom: 15px;
        }

        textarea {
            width: 100%;
            height: 100px;
            margin-top: 10px;
        }

        button {
            background-color: #333;
            color: white;
            padding: 10px 15px;
            border: none;
            cursor: pointer;
            margin-top: 10px;
        }

        button:hover {
            background-color: #575757;
        }

        input[type="file"] {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#" onclick="showSection('dashboard')">Dashboard</a>
                <ul>
                    <li><a href="#" onclick="showSection('pending-tasks')">Pending Tasks</a></li>
                    <li><a href="#" onclick="showSection('recent-tasks')">Recent Tasks</a></li>
                    <li><a href="#" onclick="showSection('time-table')">Time Table of the Day</a></li>
                    <li><a href="#" onclick="showSection('quick-links')">Quick Links</a></li>
                    <li><a href="#" onclick="showSection('rush-hour-graph')">Rush Hour Graph</a></li>
                </ul>
            </li>
            <li><a href="#" onclick="showSection('station-diary')">Station Diary</a>
                <ul>
                    <li><a href="#" onclick="showSection('line-conditions')">Line Conditions</a></li>
                    <li><a href="#" onclick="showSection('train-mapping')">Train Mapping</a></li>
                    <li><a href="#" onclick="showSection('obstruction-records')">Obstruction Records</a></li>
                    <li><a href="#" onclick="showSection('station-time-table')">Station Time Table</a></li>
                    <li><a href="#" onclick="showSection('previous-records')">Previous Records</a></li>
                </ul>
            </li>
            <li><a href="#" onclick="showSection('signal-equipment-records')">Signal & Equipment Records</a>
                <ul>
                    <li><a href="#" onclick="showSection('signal-checklist')">Signal Checklist</a></li>
                    <li><a href="#" onclick="showSection('report-damages')">Report Damages</a></li>
                </ul>
            </li>
            <li><a href="#" onclick="showSection('maintenance-logs')">Maintenance Logs</a></li>
            <li><a href="#" onclick="showSection('safety-security-records')">Safety & Security Records</a>
                <ul>
                    <li><a href="#" onclick="showSection('security-checklist')">Security Checklist</a></li>
                    <li><a href="#" onclick="showSection('missing-items')">Report Missing Items</a></li>
                    <li><a href="#" onclick="showSection('guidelines')">Safety Guidelines</a></li>
                </ul>
            </li>
        </ul>
    </nav>

    <main>
        <section id="dashboard" class="active">
            <h2>Dashboard</h2>
            <div class="dashboard-tools">
                <div>
                    <h3>Train Time Tables</h3>
                    <p>View and manage the train schedules for the day.</p>
                </div>
                <div>
                    <h3>Text to Voice Announcement</h3>
                    <textarea id="announcementText" placeholder="Enter announcement text..."></textarea>
                    <button onclick="makeAnnouncement()">Make Announcement</button>
                </div>
		<div>
    <h3>Voice to Text</h3>
    <button onclick="startVoiceRecognition()">Start Voice Recognition</button>
    <p id="voiceOutput" style="margin-top: 10px;"></p>
</div>

                <div>
                    <h3>Image to Text</h3>
                    <input type="file" id="imageInput" accept="image/*">
                    <button onclick="processImageToText()">Extract Text</button>
                    <p id="extractedText" style="margin-top: 10px;"></p>
                </div>
            </div>
        </section>
        <section id="pending-tasks">
            <h3>Pending Tasks</h3>
            <p>Overview of tasks pending completion.</p>
        </section>
        <section id="recent-tasks">
            <h3>Recent Tasks</h3>
            <p>Overview of recently completed tasks.</p>
        </section>
        <section id="time-table">
            <h3>Time Table of the Day</h3>
        </section>
        <section id="quick-links">
            <h3>Quick Links</h3>
        </section>
        <section id="rush-hour-graph">
            <h3>Rush Hour Graph</h3>
        </section>
        <section id="station-diary">
            <h2>Station Diary</h2>
        </section>
        <section id="line-conditions">
            <h3>Line Conditions</h3>
        </section>
        <section id="train-mapping">
            <h3>Train Mapping</h3>
        </section>
        <section id="obstruction-records">
            <h3>Obstruction Records</h3>
        </section>
        <section id="station-time-table">
            <h3>Station Time Table</h3>
        </section>
        <section id="previous-records">
            <h3>Previous Records</h3>
        </section>
        <section id="signal-equipment-records">
            <h2>Signal & Equipment Records</h2>
        </section>
        <section id="signal-checklist">
            <h3>Signal Checklist</h3>
        </section>
        <section id="report-damages">
            <h3>Report Damages</h3>
        </section>
        <section id="maintenance-logs">
            <h2>Maintenance Logs</h2>
        </section>
        <section id="safety-security-records">
            <h2>Safety & Security Records</h2>
        </section>
        <section id="security-checklist">
            <h3>Security Checklist</h3>
        </section>
        <section id="missing-items">
            <h3>Report Missing Items</h3>
        </section>
        <section id="guidelines">
            <h3>Safety Guidelines</h3>
        </section>
    </main>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.1/dist/tesseract.min.js"></script>
<script>
    // Function for Text to Voice Announcement
    function makeAnnouncement() {
        const text = document.getElementById('announcementText').value.trim();
        if (text === "") {
            alert("Please enter text to announce.");
            return;
        }
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = "en-US";
        window.speechSynthesis.speak(utterance);
    }

    // Function for Image to Text
    function processImageToText() {
        const imageInput = document.getElementById('imageInput');
        const extractedTextElem = document.getElementById('extractedText');

        if (!imageInput.files || imageInput.files.length === 0) {
            alert("Please select an image file.");
            return;
        }

        const file = imageInput.files[0];
        const reader = new FileReader();

        reader.onload = function () {
            const imageData = reader.result;

            // Using Tesseract.js for OCR
            Tesseract.recognize(imageData, 'eng', {
                logger: info => console.log(info) // Logs progress in the console
            }).then(({ data: { text } }) => {
                extractedTextElem.innerText = text.trim() || "No text detected in the image.";
            }).catch(error => {
                console.error(error);
                extractedTextElem.innerText = "Error: Unable to process the image.";
            });
        };

        reader.readAsDataURL(file);
    }

    // Function to display sections
    function showSection(sectionId) {
        document.querySelectorAll('main section').forEach(section => {
            section.classList.remove('active');
        });
        document.getElementById(sectionId).classList.add('active');
    }

    // Function for Voice to Text
    function startVoiceRecognition() {
        const voiceOutputElem = document.getElementById('voiceOutput');

        // Check browser support for SpeechRecognition
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (!SpeechRecognition) {
            voiceOutputElem.innerText = "Speech recognition is not supported in your browser.";
            return;
        }

        const recognition = new SpeechRecognition();
        recognition.lang = 'en-US';
        recognition.interimResults = false; // Only return final results
        recognition.maxAlternatives = 1;

        recognition.start();

        recognition.onstart = function () {
            voiceOutputElem.innerText = "Listening...";
        };

        recognition.onspeechend = function () {
            recognition.stop();
        };

        recognition.onresult = function (event) {
            const transcript = event.results[0][0].transcript;
            voiceOutputElem.innerText = `Recognized Text: ${transcript}`;
        };

        recognition.onerror = function (event) {
            voiceOutputElem.innerText = `Error: ${event.error}`;
        };
    }
</script>

</body>
</html>
